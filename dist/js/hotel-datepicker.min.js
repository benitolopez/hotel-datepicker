'use strict';export default class HotelDatepicker{constructor(a,b){const c=b||{};this.format=c.format||'YYYY-MM-DD',this.infoFormat=c.infoFormat||this.format,this.separator=c.separator||' - ',this.startOfWeek=c.startOfWeek||'sunday',this.startDate=c.startDate||new Date,this.endDate=c.endDate||!1,this.minNights=c.minNights||1,this.maxNights=c.maxNights||0,this.selectForward=c.selectForward||!1,this.disabledDates=c.disabledDates||[],this.enableCheckout=c.enableCheckout||!1,this.container=c.container||'',this.animationSpeed=c.animationSpeed||'.5s',this.hoveringTooltip=c.hoveringTooltip||!0,this.autoClose=!(c.autoClose!==void 0)||c.autoClose,this.i18n=c.i18n||{selected:'Your stay:',night:'Night',nights:'Nights',button:'Close',"day-names":['Sun','Mon','Tue','Wed','Thur','Fri','Sat'],"month-names":['January','February','March','April','May','June','July','August','September','October','November','December'],"error-more":'Date range should not be more than 1 night',"error-more-plural":'Date range should not be more than %d nights',"error-less":'Date range should not be less than 1 night',"error-less-plural":'Date range should not be less than %d nights',"info-more":'Please select a date range longer than 1 night',"info-more-plural":'Please select a date range longer than %d nights',"info-range":'Please select a date range between %d and %d nights',"info-default":'Please select a date range'},this.getValue=c.getValue||function(){return a.value},this.setValue=c.setValue||function(b){a.value=b},this.input=a,this.init()}getWeekDayNames(){let a='';if('monday'===this.startOfWeek){for(let b=0;7>b;b++)a+='<th class="datepicker__week-name">'+this.lang('day-names')[(1+b)%7]+'</th>';return a}for(let b=0;7>b;b++)a+='<th class="datepicker__week-name">'+this.lang('day-names')[b]+'</th>';return a}getMonthDom(a){return document.getElementById(this.getMonthTableId(a))}getMonthName(a){return this.lang('month-names')[a]}getDatepickerId(){return'datepicker-'+this.generateId()}getMonthTableId(a){return'month-'+a+'-'+this.generateId()}getCloseButtonId(){return'close-'+this.generateId()}getTooltipId(){return'tooltip-'+this.generateId()}getNextMonth(a){const b=new Date(a.valueOf());return new Date(b.setMonth(b.getMonth()+1))}getPrevMonth(a){const b=new Date(a.valueOf());return new Date(b.setMonth(b.getMonth()-1))}getDateString(a,b=this.format){return fecha.format(a,b)}parseDate(a,b=this.format){return fecha.parse(a,b)}init(){this.parent=this.container?this.container:this.input.parentElement,this.start=!1,this.end=!1,this.minDays=1<this.minNights?this.minNights+1:2,this.maxDays=0<this.maxNights?this.maxNights+1:0,this.startDate&&'string'==typeof this.startDate&&(this.startDate=this.parseDate(this.startDate)),this.endDate&&'string'==typeof this.endDate&&(this.endDate=this.parseDate(this.endDate)),this.isTouchDevice()&&(this.hoveringTooltip=!1),this.isOpen=!1,this.changed=!1,this.createDom();let a=new Date;this.startDate&&0>this.compareMonth(a,this.startDate)&&(a=this.startDate),this.endDate&&0<this.compareMonth(this.getNextMonth(a),this.endDate)&&(a=this.getPrevMonth(this.endDate)),this.showMonth(a,1),this.showMonth(this.getNextMonth(a),2),this.topBarDefaultText(),0<this.disabledDates.length&&this.parseDisabledDates(),this.addListeners()}addListeners(){const a=this.datepicker.getElementsByClassName('datepicker__month-button--next');for(let b=0;b<a.length;b++)a[b].addEventListener('click',(a)=>this.goToNextMonth(a));const b=this.datepicker.getElementsByClassName('datepicker__month-button--prev');for(let a=0;a<b.length;a++)b[a].addEventListener('click',(a)=>this.goToPreviousMonth(a));this.input.addEventListener('click',(a)=>this.openDatepicker(a)),document.getElementById(this.getCloseButtonId()).addEventListener('click',(a)=>this.closeDatepicker(a)),document.addEventListener('click',(a)=>this.documentClick(a)),document.addEventListener('mouseover',(a)=>this.documentHover(a)),document.addEventListener('mouseout',(a)=>this.documentMouseOut(a)),this.input.addEventListener('change',()=>this.checkAndSetDefaultValue())}generateId(){let a='';return a+=this.input.id?this.input.id:Date.now(),a}createDom(){const a=this.createDatepickerDomString();this.parent.insertAdjacentHTML('beforeend',a),this.datepicker=document.getElementById(this.getDatepickerId())}createDatepickerDomString(){let a='<div id="'+this.getDatepickerId()+'" style="display:none" class="datepicker datepicker--closed">';a+='<div class="datepicker__inner">',a+='<div class="datepicker__topbar"><div class="datepicker__info datepicker__info--selected"><span class="datepicker__info datepicker__info--selected-label">'+this.lang('selected')+' </span> <strong class="datepicker__info-text datepicker__info-text--start-day">...</strong> <span class="datepicker__info-text datepicker__info--separator">'+this.separator+'</span> <strong class="datepicker__info-text datepicker__info-text--end-day">...</strong> <em class="datepicker__info-text datepicker__info-text--selected-days">(<span></span>)</em></div><div class="datepicker__info datepicker__info--feedback"></div><button type="button" id="'+this.getCloseButtonId()+'" class="datepicker__close-button">'+this.lang('button')+'</button></div>',a+='<div class="datepicker__months">';for(let b=1;2>=b;b++)a+='<table id="'+this.getMonthTableId(b)+'" class="datepicker__month datepicker__month--month'+b+'"><thead><tr class="datepicker__month-caption"><th><span class="datepicker__month-button datepicker__month-button--prev" month="'+b+'">&lt;</span></th><th colspan="5" class="datepicker__month-name"></th><th><span class="datepicker__month-button datepicker__month-button--next" month="'+b+'">&gt;</span></th></tr><tr class="datepicker__week-days">'+this.getWeekDayNames(b)+'</tr></thead><tbody></tbody></table>';return a+='</div>',a+='<div style="display:none" id="'+this.getTooltipId()+'" class="datepicker__tooltip"></div>',a+='</div>',a+='</div>',a}showMonth(a,b){const c=this.getMonthName(a.getMonth()),d=this.getMonthDom(b),e=d.getElementsByClassName('datepicker__month-name')[0],f=d.getElementsByTagName('tbody')[0];e.textContent=c+' '+a.getFullYear(),this.emptyElement(f),f.insertAdjacentHTML('beforeend',this.createMonthDomString(a)),this.updateSelectableRange(),this['month'+b]=a}createMonthDomString(a){const b=[];let c,d='';a.setDate(1);let e=a.getDay();const f=a.getMonth();if(0===e&&'monday'===this.startOfWeek&&(e=7),0<e)for(let d=e;0<d;d--){const e=new Date(a.getTime()-8.64e7*d);c=this.isValidDate(e.getTime()),(this.startDate&&0>this.compareDay(e,this.startDate)||this.endDate&&0<this.compareDay(e,this.endDate))&&(c=!1),b.push({date:e,type:'lastMonth',day:e.getDate(),time:e.getTime(),valid:c})}for(let d=0;40>d;d++){const e=this.addDays(a,d);c=this.isValidDate(e.getTime()),(this.startDate&&0>this.compareDay(e,this.startDate)||this.endDate&&0<this.compareDay(e,this.endDate))&&(c=!1),b.push({date:e,type:e.getMonth()===f?'visibleMonth':'nextMonth',day:e.getDate(),time:e.getTime(),valid:c})}for(let c,e=0;6>e&&'nextMonth'!==b[7*e].type;e++){c=0,d+='<tr class="datepicker__week-row">';for(let a,f=0;7>f;f++){a='monday'===this.startOfWeek?f+1:f,a=b[7*e+a];const g=this.getDateString(a.time)===this.getDateString(new Date);let h=!1;a.valid&&0<this.disabledDates.length&&(-1<this.disabledDates.indexOf(this.getDateString(a.time,'YYYY-MM-DD'))?(a.valid=!1,h=!0,c++):c=0);const i={time:a.time,class:'datepicker__month-day--'+a.type+' datepicker__month-day--'+(a.valid?'valid':'invalid')+' '+(g?'datepicker__month-day--today':'')+' '+(h?'datepicker__month-day--disabled':'')+' '+(h&&this.enableCheckout&&1==c?'datepicker__month-day--checkout-enabled':'')};d+='<td class="datepicker__month-day '+i.class+'" '+this.printAttributes(i)+'>'+a.day+'</td>'}d+='</tr>'}return d}openDatepicker(){this.isOpen||(this.removeClass(this.datepicker,'datepicker--closed'),this.addClass(this.datepicker,'datepicker--open'),this.checkAndSetDefaultValue(),this.slideDown(this.datepicker,this.animationSpeed),this.isOpen=!0,this.showSelectedDays(),this.disableNextPrevButtons())}closeDatepicker(){this.isOpen&&(this.removeClass(this.datepicker,'datepicker--open'),this.addClass(this.datepicker,'datepicker--closed'),this.slideUp(this.datepicker,this.animationSpeed),this.isOpen=!1)}autoclose(){this.autoClose&&this.changed&&this.isOpen&&this.start&&this.end&&this.closeDatepicker()}documentClick(a){this.parent.contains(a.target)||a.target===this.input?'td'===a.target.tagName.toLowerCase()&&this.dayClicked(a.target):this.closeDatepicker()}documentHover(a){a.target.tagName&&'td'===a.target.tagName.toLowerCase()&&this.dayHovering(a.target)}documentMouseOut(a){if(a.target.tagName&&'td'===a.target.tagName.toLowerCase()){const a=document.getElementById(this.getTooltipId());a.style.display='none'}}checkAndSetDefaultValue(){const a=this.getValue(),b=a?a.split(this.separator):'';if(b&&2<=b.length){let a=this.format;a.match(/Do/)&&(a=a.replace(/Do/,'D'),b[0]=b[0].replace(/(\d+)(th|nd|st)/,'$1'),b[1]=b[1].replace(/(\d+)(th|nd|st)/,'$1')),this.changed=!1,this.setDateRange(this.parseDate(b[0],a),this.parseDate(b[1],a)),this.changed=!0}else{const a=this.datepicker.getElementsByClassName('datepicker__info--selected')[0];a.style.display='none'}}setDateRange(a,b){if(a.getTime()>b.getTime()){let c=b;b=a,a=c,c=null}let c=!0;return(this.startDate&&0>this.compareDay(a,this.startDate)||this.endDate&&0<this.compareDay(b,this.endDate))&&(c=!1),c?void(a.setTime(a.getTime()+43200000),b.setTime(b.getTime()+43200000),this.start=a.getTime(),this.end=b.getTime(),0<this.compareDay(a,b)&&0===this.compareMonth(a,b)&&(b=this.getNextMonth(a)),0===this.compareMonth(a,b)&&(b=this.getNextMonth(a)),this.showMonth(a,1),this.showMonth(b,2),this.showSelectedDays(),this.disableNextPrevButtons(),this.checkSelection(),this.showSelectedInfo(),this.autoclose()):(this.showMonth(this.startDate,1),this.showMonth(this.getNextMonth(this.startDate),2),this.showSelectedDays(),void this.disableNextPrevButtons())}showSelectedDays(){if(this.start||this.end){const a=this.datepicker.getElementsByTagName('td');for(let b=0;b<a.length;b++){const c=parseInt(a[b].getAttribute('time'),10);this.start&&this.end&&this.end>=c&&this.start<=c||this.start&&!this.end&&this.getDateString(this.start,'YYYY-MM-DD')===this.getDateString(c,'YYYY-MM-DD')?this.addClass(a[b],'datepicker__month-day--selected'):this.removeClass(a[b],'datepicker__month-day--selected'),this.start&&this.getDateString(this.start,'YYYY-MM-DD')===this.getDateString(c,'YYYY-MM-DD')?this.addClass(a[b],'datepicker__month-day--first-day-selected'):this.removeClass(a[b],'datepicker__month-day--first-day-selected'),this.end&&this.getDateString(this.end,'YYYY-MM-DD')===this.getDateString(c,'YYYY-MM-DD')?this.addClass(a[b],'datepicker__month-day--last-day-selected'):this.removeClass(a[b],'datepicker__month-day--last-day-selected')}}}showSelectedInfo(){const a=this.datepicker.getElementsByClassName('datepicker__info--selected')[0],b=a.getElementsByClassName('datepicker__info-text--start-day')[0],c=a.getElementsByClassName('datepicker__info-text--end-day')[0],d=a.getElementsByClassName('datepicker__info-text--selected-days')[0],e=document.getElementById(this.getCloseButtonId());if(b.textContent='...',c.textContent='...',d.style.display='none',this.start&&(a.style.display='',b.textContent=this.getDateString(new Date(parseInt(this.start,10)),this.infoFormat)),this.end&&(c.textContent=this.getDateString(new Date(parseInt(this.end,10)),this.infoFormat)),this.start&&this.end){const a=this.countDays(this.end,this.start)-1,b=1==a?a+' '+this.lang('night'):a+' '+this.lang('nights'),c=this.getDateString(new Date(this.start))+this.separator+this.getDateString(new Date(this.end));d.style.display='',d.firstElementChild.textContent=b,e.disabled=!1,this.setValue(c,this.getDateString(new Date(this.start)),this.getDateString(new Date(this.end))),this.changed=!0}else e.disabled=!0}dayClicked(a){if(!this.hasClass(a,'datepicker__month-day--invalid')){const b=parseInt(a.getAttribute('time'),10);if(this.addClass(a,'datepicker__month-day--selected'),this.start&&this.end||!this.start&&!this.end?(this.start=b,this.end=!1):this.start&&(this.end=b),this.start&&this.end&&this.start>this.end){const a=this.end;this.end=this.start,this.start=a}this.start=parseInt(this.start,10),this.end=parseInt(this.end,10),this.clearHovering(),this.start&&!this.end&&this.dayHovering(a),this.updateSelectableRange(),this.checkSelection(),this.showSelectedInfo(),this.showSelectedDays(),this.autoclose()}}isValidDate(a){if(a=parseInt(a,10),this.startDate&&0>this.compareDay(a,this.startDate)||this.endDate&&0<this.compareDay(a,this.endDate))return!1;if(this.start&&!this.end){if(0<this.maxDays&&this.countDays(a,this.start)>this.maxDays||0<this.minDays&&this.countDays(a,this.start)<this.minDays)return!1;if(this.selectForward&&a<this.start)return!1;if(0<this.disabledDates.length){const b=this.getClosestDates(new Date(parseInt(this.start,10)));if(b[0]&&0>=this.compareDay(a,b[0]))return!1;if(b[1]&&0<=this.compareDay(a,b[1]))return!1}}return!0}checkSelection(){const a=Math.ceil((this.end-this.start)/8.64e7)+1,b=this.datepicker.getElementsByClassName('datepicker__info--feedback')[0];if(this.maxDays&&a>this.maxDays){this.start=!1,this.end=!1;const a=this.datepicker.getElementsByTagName('td');for(let b=0;b<a.length;b++)this.removeClass(a[b],'datepicker__month-day--selected'),this.removeClass(a[b],'datepicker__month-day--first-day-selected'),this.removeClass(a[b],'datepicker__month-day--last-day-selected');const c=this.maxDays-1;this.topBarErrorText(b,'error-more',c)}else if(this.minDays&&a<this.minDays){this.start=!1,this.end=!1;const a=this.datepicker.getElementsByTagName('td');for(let b=0;b<a.length;b++)this.removeClass(a[b],'datepicker__month-day--selected'),this.removeClass(a[b],'datepicker__month-day--first-day-selected'),this.removeClass(a[b],'datepicker__month-day--last-day-selected');const c=this.minDays-1;this.topBarErrorText(b,'error-less',c)}else this.start||this.end?(this.removeClass(b,'datepicker__info--error'),this.removeClass(b,'datepicker__info--help')):(this.removeClass(b,'datepicker__info--error'),this.addClass(b,'datepicker__info--help'))}addDays(a,b){const c=new Date(a);return c.setDate(c.getDate()+b),c}countDays(a,b){return Math.abs(this.daysFrom1970(a)-this.daysFrom1970(b))+1}compareDay(a,b){const c=parseInt(this.getDateString(a,'YYYYMMDD'),10)-parseInt(this.getDateString(b,'YYYYMMDD'),10);return 0<c?1:0==c?0:-1}compareMonth(a,b){const c=parseInt(this.getDateString(a,'YYYYMM'),10)-parseInt(this.getDateString(b,'YYYYMM'),10);return 0<c?1:0==c?0:-1}daysFrom1970(a){return Math.floor(this.toLocalTimestamp(a)/8.64e7)}toLocalTimestamp(a){return'object'==typeof a&&a.getTime&&(a=a.getTime()),'string'!=typeof a||a.match(/\d{13}/)||(a=this.parseDate(a).getTime()),a=parseInt(a,10)-1e3*(60*new Date().getTimezoneOffset()),a}printAttributes(a){const b=a;let c='';for(const d in a)Object.prototype.hasOwnProperty.call(b,d)&&(c+=d+'="'+b[d]+'" ');return c}goToNextMonth(a){const b=a.target.getAttribute('month'),c=1<b;let d=c?this.month2:this.month1;d=this.getNextMonth(d);!this.isSingleMonth()&&!c&&0<=this.compareMonth(d,this.month2)||this.isMonthOutOfRange(d)||(this.showMonth(d,b),this.showSelectedDays(),this.disableNextPrevButtons())}goToPreviousMonth(a){const b=a.target.getAttribute('month'),c=1<b;let d=c?this.month2:this.month1;d=this.getPrevMonth(d);c&&0>=this.compareMonth(d,this.month1)||this.isMonthOutOfRange(d)||(this.showMonth(d,b),this.showSelectedDays(),this.disableNextPrevButtons())}isSingleMonth(){return!this.isVisible(this.getMonthDom(2))}isMonthOutOfRange(a){const b=new Date(a.valueOf());return this.startDate&&new Date(b.getFullYear(),b.getMonth()+1,0,23,59,59)<this.startDate||this.endDate&&new Date(b.getFullYear(),b.getMonth(),1)>this.endDate}disableNextPrevButtons(){if(!this.isSingleMonth()){const a=parseInt(this.getDateString(this.month1,'YYYYMM'),10),b=parseInt(this.getDateString(this.month2,'YYYYMM'),10),c=Math.abs(a-b),d=this.datepicker.getElementsByClassName('datepicker__month-button--next')[0],e=this.datepicker.getElementsByClassName('datepicker__month-button--prev')[1];1<c&&89!==c?(this.removeClass(d,'datepicker__month-button--disabled'),this.removeClass(e,'datepicker__month-button--disabled')):(this.addClass(d,'datepicker__month-button--disabled'),this.addClass(e,'datepicker__month-button--disabled'))}}topBarDefaultText(){let a='';a=this.minDays&&this.maxDays?this.lang('info-range'):this.minDays&&2<this.minDays?this.lang('info-more-plural'):this.minDays?this.lang('info-more'):this.lang('info-default');const b=this.datepicker.getElementsByClassName('datepicker__info--feedback')[0];a=a.replace(/%d/,this.minDays-1).replace(/%d/,this.maxDays-1),this.addClass(b,'datepicker__info--help'),this.removeClass(b,'datepicker__info--error'),b.textContent=a}topBarErrorText(a,b,c){this.addClass(a,'datepicker__info--error'),this.removeClass(a,'datepicker__info--help'),1<c?(b=this.lang(b+'-plural'),b=b.replace('%d',c),a.textContent=b):b=this.lang(b);const d=this.datepicker.getElementsByClassName('datepicker__info--selected')[0];d.style.display='none'}updateSelectableRange(){const a=this.datepicker.getElementsByTagName('td'),b=this.start&&!this.end;for(let c=0;c<a.length;c++)if(this.hasClass(a[c],'datepicker__month-day--invalid')&&this.hasClass(a[c],'datepicker__month-day--tmp')&&(this.removeClass(a[c],'datepicker__month-day--invalid'),this.removeClass(a[c],'datepicker__month-day--tmp'),this.addClass(a[c],'datepicker__month-day--valid')),b&&this.hasClass(a[c],'datepicker__month-day--visibleMonth')&&(this.hasClass(a[c],'datepicker__month-day--valid')||this.hasClass(a[c],'datepicker__month-day--disabled'))){const b=parseInt(a[c].getAttribute('time'),10);this.isValidDate(b)?(this.addClass(a[c],'datepicker__month-day--valid'),this.addClass(a[c],'datepicker__month-day--tmp'),this.removeClass(a[c],'datepicker__month-day--invalid'),this.removeClass(a[c],'datepicker__month-day--disabled')):(this.addClass(a[c],'datepicker__month-day--invalid'),this.addClass(a[c],'datepicker__month-day--tmp'),this.removeClass(a[c],'datepicker__month-day--valid'))}return!0}dayHovering(a){const b=parseInt(a.getAttribute('time'),10);let c='';if(!this.hasClass(a,'datepicker__month-day--invalid')){const a=this.datepicker.getElementsByTagName('td');for(let c=0;c<a.length;c++){const d=parseInt(a[c].getAttribute('time'),10);d===b?this.addClass(a[c],'datepicker__month-day--hovering'):this.removeClass(a[c],'datepicker__month-day--hovering'),this.start&&!this.end&&(this.start<d&&b>=d||this.start>d&&b<=d)?this.addClass(a[c],'datepicker__month-day--hovering'):this.removeClass(a[c],'datepicker__month-day--hovering')}if(this.start&&!this.end){const a=this.countDays(b,this.start)-1;if(this.hoveringTooltip)if('function'==typeof this.hoveringTooltip)c=this.hoveringTooltip(a,this.start,b);else if(!0===this.hoveringTooltip&&0<a){const b=1==a?this.lang('night'):this.lang('nights');c=a+' '+b}}}if(c){const b=a.getBoundingClientRect(),d=this.datepicker.getBoundingClientRect();let e=b.left-d.left,f=b.top-d.top;e+=b.width/2;const g=document.getElementById(this.getTooltipId());g.style.display='',g.textContent=c;const i=g.getBoundingClientRect().width,j=g.getBoundingClientRect().height;e-=i/2,f-=j,setTimeout(()=>{g.style.left=e+'px',g.style.top=f+'px'},10)}else{const a=document.getElementById(this.getTooltipId());a.style.display='none'}}clearHovering(){const a=this.datepicker.getElementsByTagName('td');for(let b=0;b<a.length;b++)this.removeClass(a[b],'datepicker__month-day--hovering');const b=document.getElementById(this.getTooltipId());b.style.display='none'}clearSelection(){this.start=!1,this.end=!1;const a=this.datepicker.getElementsByTagName('td');for(let b=0;b<a.length;b++)this.removeClass(a[b],'datepicker__month-day--selected'),this.removeClass(a[b],'datepicker__month-day--first-day-selected'),this.removeClass(a[b],'datepicker__month-day--last-day-selected');this.setValue(''),this.checkSelection(),this.showSelectedInfo(),this.showSelectedDays()}parseDisabledDates(){const a=[];for(let b=0;b<this.disabledDates.length;b++)a[b]=fecha.parse(this.disabledDates[b],'YYYY-MM-DD');a.sort((c,a)=>c-a),this.disabledDatesTime=a}getClosestDates(a){let b=[!1,!1];if(a<this.disabledDatesTime[0])b=this.enableCheckout?[!1,this.addDays(this.disabledDatesTime[0],1)]:[!1,this.disabledDatesTime[0]];else if(a>this.disabledDatesTime[this.disabledDatesTime.length-1])b=[this.disabledDatesTime[this.disabledDatesTime.length-1],!1];else{let c=this.disabledDatesTime.length,d=this.disabledDatesTime.length;const e=Math.abs(new Date(0,0,0).valueOf());let f,g=e,h=-e,i=0;for(f=0;f<this.disabledDatesTime.length;++f)i=a-this.disabledDatesTime[f],0>i&&i>h&&(d=f,h=i),0<i&&i<g&&(c=f,g=i);this.disabledDatesTime[c]&&(b[0]=this.disabledDatesTime[c]),b[1]='undefined'!=typeof this.disabledDatesTime[c]&&(this.enableCheckout?this.addDays(this.disabledDatesTime[d],1):this.disabledDatesTime[d])}return b}lang(a){return a in this.i18n?this.i18n[a]:''}emptyElement(a){for(;a.firstChild;)a.removeChild(a.firstChild)}classRegex(a){return new RegExp('(^|\\s+)'+a+'(\\s+|$)')}hasClass(a,b){return this.classRegex(b).test(a.className)}addClass(a,b){this.hasClass(a,b)||(a.className=a.className+' '+b)}removeClass(a,b){a.className=a.className.replace(this.classRegex(b),' ')}isVisible(a){return a.offsetWidth||a.offsetHeight||a.getClientRects().length}slideDown(a,b){a.style.display='';const c=a.getBoundingClientRect().height;a.style.height=0,this.recalc(a.offsetHeight),a.style.transition='height '+b,a.style.height=c+'px',a.addEventListener('transitionend',()=>{a.style.height=a.style.transition=a.style.display=''})}slideUp(a,b){const c=a.getBoundingClientRect().height;a.style.height=c+'px',this.recalc(a.offsetHeight),a.style.transition='height '+b,a.style.height=0,a.addEventListener('transitionend',()=>{a.style.display='none'})}recalc(a){return a.offsetHeight}isTouchDevice(){return'ontouchstart'in window||window.DocumentTouch&&document instanceof DocumentTouch}open(){this.openDatepicker()}close(){this.closeDatepicker()}getDatePicker(){return this.datepicker}setRange(a,b){'string'==typeof a&&'string'==typeof b&&(a=this.parseDate(a),b=this.parseDate(b)),this.setDateRange(a,b)}clear(){this.clearSelection()}getNights(){let a=0;if(this.start&&this.end)a=this.countDays(this.end,this.start)-1;else{const b=this.getValue(),c=b?b.split(this.separator):'';if(c&&2<=c.length){let b=this.format;b.match(/Do/)&&(b=b.replace(/Do/,'D'),c[0]=c[0].replace(/(\d+)(th|nd|st)/,'$1'),c[1]=c[1].replace(/(\d+)(th|nd|st)/,'$1')),a=this.countDays(this.parseDate(c[0],b),this.parseDate(c[1],b))-1}}return a}}